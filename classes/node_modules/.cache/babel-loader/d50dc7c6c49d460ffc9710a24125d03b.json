{"ast":null,"code":"var _jsxFileName = \"/Users/alonrgeffner/Documents/test 1/HW Projects/react-jokes-classes/classes/src/JokeList.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Joke from \"./Joke\";\nimport \"./JokeList.css\";\n\nclass JokeList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      jokes: []\n    };\n    this.generateNewJokes = this.generateNewJokes.bind(this);\n    this.vote = this.vote.bind(this);\n  }\n  /* at mount, get jokes */\n\n\n  componentDidMount() {\n    if (this.state.jokes.length < this.props.numJokesToGet) this.getJokes();\n  }\n\n  componentDidUpdate() {\n    if (this.state.jokes.length < this.props.numJokesToGet) this.getJokes();\n  }\n  /* get jokes if there are no jokes */\n\n\n  async getJokes() {\n    try {\n      let jokes = this.state.jokes;\n      let seenJokes = new Set(jokes.map(joke => joke.id));\n\n      while (jokes.length < this.props.numJokesToGet) {\n        let res = await axios.get(\"https://icanhazdadjoke.com\", {\n          headers: {\n            Accept: \"application/json\"\n          }\n        });\n        let {\n          status,\n          ...jokeObj\n        } = res.data;\n\n        if (!seenJokes.has(jokeObj.id)) {\n          seenJokes.add(jokeObj.id);\n          jokes.push({ ...jokeObj,\n            votes: 0\n          });\n        } else {\n          console.log(\"duplicate found!\");\n        }\n      }\n\n      this.setState({\n        jokes\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  /* empty joke list and then call getJokes */\n\n\n  generateNewJokes() {\n    this.setState(st => ({\n      jokes: st.jokes\n    }));\n  }\n  /* change vote for this id by delta (+1 or -1) */\n\n\n  vote(id, delta) {\n    this.setState(st => ({\n      jokes: allJokes.jokes.map(j => j.id === id ? { ...j,\n        votes: j.votes + delta\n      } : j)\n    }));\n  }\n  /* render: either loading spinner or list of sorted jokes. */\n\n\n  render() {\n    let sortedJokes = [...this.state.jokes].sort((a, b) => b.votes - a.votes);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"JokeList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"JokeList-getmore\",\n      onClick: this.generateNewJokes,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, \"Get New Jokes\"), sortedJokes.map(j => /*#__PURE__*/React.createElement(Joke, {\n      text: j.joke,\n      key: j.id,\n      id: j.id,\n      votes: j.votes,\n      vote: this.vote,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    })), sortedJokes.length < this.props.numJokesToGet ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-4x fa-spinner fa-spin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    })) : null);\n  }\n\n}\n\nJokeList.defaultProps = {\n  numJokesToGet: 10\n};\nexport default JokeList;","map":{"version":3,"sources":["/Users/alonrgeffner/Documents/test 1/HW Projects/react-jokes-classes/classes/src/JokeList.js"],"names":["React","Component","axios","Joke","JokeList","constructor","props","state","jokes","generateNewJokes","bind","vote","componentDidMount","length","numJokesToGet","getJokes","componentDidUpdate","seenJokes","Set","map","joke","id","res","get","headers","Accept","status","jokeObj","data","has","add","push","votes","console","log","setState","e","st","delta","allJokes","j","render","sortedJokes","sort","a","b","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Joke from \"./Joke\";\nimport \"./JokeList.css\";\n\nclass JokeList extends Component {\n  static defaultProps = { numJokesToGet: 10 };\n\n  constructor(props) {\n    super(props);\n    this.state = {jokes: []};\n\n    this.generateNewJokes = this.generateNewJokes.bind(this);\n    this.vote = this.vote.bind(this);\n  }\n\n   /* at mount, get jokes */\n\n   componentDidMount() {\n    if (this.state.jokes.length < this.props.numJokesToGet) this.getJokes();\n  }\n\n  componentDidUpdate() {\n    if (this.state.jokes.length < this.props.numJokesToGet) this.getJokes();\n  }\n\n  /* get jokes if there are no jokes */\n    async getJokes() {\n      try {\n        let jokes = this.state.jokes;\n        let seenJokes = new Set(jokes.map(joke => joke.id));\n        while (jokes.length < this.props.numJokesToGet) {\n          let res = await axios.get(\"https://icanhazdadjoke.com\", {\n            headers: { Accept: \"application/json\" }\n          });\n          let { status, ...jokeObj } = res.data;\n  \n          if (!seenJokes.has(jokeObj.id)) {\n            seenJokes.add(jokeObj.id);\n            jokes.push({ ...jokeObj, votes: 0 });\n          } else {\n            console.log(\"duplicate found!\");\n          }\n        }\n        this.setState({jokes});\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n  /* empty joke list and then call getJokes */\n\n  generateNewJokes() {\n    this.setState(st => ({ jokes: st.jokes})\n    );\n  }\n\n  /* change vote for this id by delta (+1 or -1) */\n\n  vote(id, delta) {\n    this.setState(st => \n      ({ jokes: allJokes.jokes.map(j =>\n       (j.id === id ? { ...j, votes: j.votes + delta } : j))\n      })\n    );\n  }\n\n  /* render: either loading spinner or list of sorted jokes. */\n  render() {\n    let sortedJokes = [...this.state.jokes].sort((a, b) => b.votes - a.votes);\n\n    return (\n      <div className=\"JokeList\">\n        <button className=\"JokeList-getmore\" onClick={this.generateNewJokes}>\n          Get New Jokes\n        </button>\n  \n        {sortedJokes.map(j => (\n          <Joke text={j.joke} key={j.id} id={j.id} votes={j.votes} vote={this.vote}/>\n        ))}\n\n        {sortedJokes.length < this.props.numJokesToGet ? (\n          <div className=\"loading\">\n            <i className=\"fas fa-4x fa-spinner fa-spin\" />\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default JokeList;"]},"metadata":{},"sourceType":"module"}